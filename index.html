<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

		<title>Lessons Learned from Five Years of Building HTML5 Games</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/sky.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->


    <script src="assets/js/jquery-1.9.1.min.js"></script>
    <style>
      div.list-frag {
          margin-top: 0.5em;
      }

      div.note {
          text-align: left;
          font-size: 0.6em;
          margin-top: 3em;
      }

      div.footnote {
          font-size: 0.6em;
          margin-top: 5em;
          width: auto;
      }

      li {list-style-type: disc;}

      body section div img.inline {
        display: inline;
        height: 57px;
        border: none;
        box-shadow:none;
        margin: 0px 2px;
      }

      body section div img.inline.app-icon {
        height: 80px;
      }

      em.css-attr {
        font-style: normal;
        color: #715EFF;
      }

      em.html {
        font-style: normal;
        color: #FF5E5E;
      }

      em.striekout {
        color: #FF5E5E;
        font-style: normal;
        text-decoration: line-through;
      }

      div.left-text {
        text-align: left;
      }

      .reveal ul {
        margin-bottom: 1em;
      }

      .css-example {
        position: relative;
      }
      .css-example .container {
        height: 200px;
        width: 100%;
        padding: 0px 20px;

      }

      .css-example pre code {
        max-height: 450px;
      }

      .superAnim{
        -webkit-animation-name: superAnim;
        -webkit-animation-duration: 1.22s;
        -webkit-animation-delay: 0s;
        -webkit-animation-fill-mode: both;
        -webkit-animation-iteration-count: infinite;
        background: url(/assets/images/HTML5_Badge.png) no-repeat;
        width:  178px;
        height: 178px;
        position:absolute;
       }

      .superAnim2 {
        -webkit-animation-delay: 0.25s;
        right: 20px;
      }

      @-webkit-keyframes superAnim {
       0% {
       -webkit-transform: translate3d(0px, 0px, 0px) scale3d(1.522, 0.322, 1);
       opacity: 0;
       -webkit-animation-timing-function:ease;
       }
       23.77% {
       -webkit-transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1);
       opacity: 1;
       -webkit-animation-timing-function:ease;
       }
       31.97% {
       -webkit-transform: translate3d(0px, 0px, 0px) scale3d(1.384, 1.384, 1);
       opacity: 1;
       -webkit-animation-timing-function:ease;
       }
       50% {
       -webkit-transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1);
       opacity: 1;
       -webkit-animation-timing-function:ease-in;
       }
       100% {
       -webkit-transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1);
       opacity: 0;
       -webkit-animation-timing-function:ease;
       }
      }

      .walking {
        position: absolute;
        -webkit-transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        -webkit-transition: none;
        -webkit-animation-name: 'walkingMove';
        -webkit-animation-duration: 8000ms;
        -webkit-animation-timing-function: linear;
        -webkit-animation-iteration-count: infinite;
      }
      @-webkit-keyframes 'walkingMove' {
        0% { -webkit-transform: translate3d(800%,0px,0px) scale3d(1,1,1)}
        45% { -webkit-transform: translate3d(0%,0px,0px) scale3d(1,1,1)}
        52% { -webkit-transform: translate3d(0%,100px,0px) scale3d(-1,1,1)}
        96% { -webkit-transform: translate3d(800%,100px,0px) scale3d(-1,1,1)}
        100% { -webkit-transform: translate3d(800%,0px,0px) scale3d(1,1,1)}
      }

      .walking2 {
        -webkit-animation-delay: 4000ms;
        z-index: 0;
        -webkit-transform: translate3d(300px, 300px, 0px);
      }
      .walking.walking2 > div {
        background: url('/assets/images/sprite_ref2.png');
      }
      .walking > div {
        background: url('/assets/images/sprite_ref1.png');
        width: 100px;
        height: 100px;
        -webkit-transition: none;
        -webkit-animation-name: 'walkingStep';
        -webkit-animation-duration: 600ms;
        -webkit-animation-timing-function: step-start;
        -webkit-animation-iteration-count: infinite;
      }

      @-webkit-keyframes 'walkingStep' {
        0% { background-position: 0 -100px; }
        20% { background-position: -100px -100px; }
        40% { background-position: -200px -100px; }
        60% { background-position: -300px -100px; }
        80% { background-position: -400px -100px; }
        100% { background-position: -500px -100px; }
      }

      #psU2RY8T6-an-anim {
        display: none;
        position: absolute;
        top: 0;
        left: 250px;
      }

      .reveal div.contacts {
        margin-top: 2em;
        height: 145px;
      }

      .contacts div {
        text-align:  left;
      }

      .contacts .left {
        float: left;
      }
      .contacts .right {
        float: right;
      }
    </style>

  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
                <section>
                    <h2>
                          Lessons Learned from Five Years of Building HTML5 Games
                    </h2>
                <aside class="notes">
                <p>Welcome, my name is... (etc.)<p>
                <ul>
                  <li>A lead game developer at Uken Games</li>
                  <li>One of the first hires at Uken</li>
                  <li>Working with Web Apps and Games for the past 6 years</li>
                  <li>Talking about some of the lessons learned over the past 5 years building games with web technology</li>
                </ul>
              </aside>
            </section>
            <section>
                <h2><img src="/assets/images/uken_logo.png" style="border:none;height:200px;box-shadow:none;"/></h2>
                <div>

                  <p style="padding-top: 10px;">
                    <img class="inline app-icon" src="icons/heroes.png" />
                    <img class="inline app-icon" src="icons/villains.png" />
                    <img class="inline app-icon" src="icons/forces.png" />
                    <img class="inline app-icon" src="icons/galaxy.png" />
                    <img class="inline app-icon" src="icons/legends.png" />
                    <br/>
                    <img class="inline app-icon" src="icons/crime.png" />
                    <img class="inline app-icon" src="icons/streetz.png" />
                    <img class="inline app-icon" src="icons/mighty.png" />
                    <img class="inline app-icon" src="icons/bingo.png" />
                    <img class="inline app-icon" src="icons/wordswap.png" />
                  </p>
                  <p style="padding: 10px;">
                    <img src="icons/facebook_square_icon.png" class="inline"/>
                    <img src="icons/apple.jpeg" class="inline"/>
                    <img src="icons/android.jpeg" class="inline"/>
                    <img src="icons/blackberry.jpeg" class="inline"/>
                    <img src="icons/kik_flat.png" class="inline"/>
                    <img src="icons/amazon.png" class="inline"/>
                    <img src="icons/windows.png" class="inline"/>
                  </p>
                  <p>Toronto's Largest Independent Game Studio</p>
                </div>
                <aside class="notes">
                  <p>A little about Uken</p>
                  <ul>
                    <li>5 years old, grown to around 65 people</li>
                    <li>Toronto's largest Independant Game Studio</li>
                    <li>Building on revenue</li>
                    <li>10 games out, most HTML5 based</li>
                    <li>7 platforms</li>
                  </ul>
               </aside>
            </section>
            <section>
                <h2>Games with Web Technology</h2>
                <div style="display:inline-block;width:45%;vertical-align:top;padding-top:1%;">
                  <p>Experiences building, lanuching and supporting HTML5 Games</p>
                  <p style="margin-top:8%;">Many top games on mobile platforms are using HTML5</p>
                </div>
                <div style="display:inline-block;width:45%;">
                  <p>
                    <img src="/assets/images/tower_up_cropped.png"/><br/>
                    <span style="font-size:70%;margin-top:-5%;position:relative;top:-1em;">"agonisingly slow-loading assets"</span><br/>
                    <em style="font-size:50%;position:relative;top:-2em;">(Edge Magazine review of TowerUp, February 1 2012)</em>
                  </p>
                </div>
                <aside class="notes">

                  <ul>
                    <li>Talk is about...</li>
                    <li>Our experiences building, lanuching and supporting HTML5 Games</li>
                    <li>Lots of HTML5 game projects, but most are tech demos<br />
                  - I've found it harder to find talks from people sharing successeful, in production games (can live off)</li>
                    <li>I'll go through some specific lessons learned, followed by Q &amp; A</li>
                    <li>Had a lot of success, but also failures (TowerUp) - launched on first gen iPad, then iPhone</li>
                    <li><p style="margin-bottom: 0in">Though rarer, many top games on mobile are using HTML5</p>

                    <ul>
                        <li><p style="margin-bottom: 0in">Rage of Bahamut</p></li>
                        <li><p style="margin-bottom: 0in">Legends of the Cryptids</p></li>
                        <li><p style="margin-bottom: 0in">Disney.com - Suite of successful web games designed for mobile</p></li>
                        <li><p style="margin-bottom: 0in">Most hybrid apps</p></li>
                    </ul>
                  </ul>
                </aside>
            </section>
            <section>
              <h2>So you want to make a game?</h2>
                <p>What platform will you build for?</p>
                <p>How will you package your game?</p>

              <aside class="notes">
                <ul>
                  <li>iOS and Android fastest growing games market<br />
                    - 2.9X growth in 2013</li>
                  <li>Pure web or hybrid app? (Hybrid: native app wrapper around a WebView)<br />
                    - Hybrid offers better distribution and access to payments, push notifications, more sensors</li>
                    <br />
                  <li>these are the decisions we went with, and what I'll be focusing on, however the lessons should apply more broadly as well</li>
                </ul>
              </aside>
            </section>
            <section>
                <h2>Canvas vs DOM</h2>
                <div class="left-text">
                    <h3>Canvas</h3>
                    <ul>
                        <li>Direct control of rendering</li>
                        <li>Slow &amp; inconsistent</li>
                        <li><em class="striekout">WebGL</em> (not ready for mobile)</li>
                    </ul>
                    <h3>DOM</h3>
                    <ul>
                        <li>Rapid development &amp; familiar UI</li>
                        <li>Hardware accellerated CSS3 animations</li>
                    </ui>
                </div>
                <aside class="notes">
                    Next choice, Canvas vs DOM
                    <br />
                    Canvas
                    <ul>
                      <li>The canvas element came with the promise of direct rendering control
                      <ul>
                        <li>Slow: Large canvas elements can be big performance hogs on mobile when trying to maintain a high framerate</li>
                        <li>canvas graphics libraries are still not that mature when it comes to more advanced techniques like double buffering and dirty rectangles</li>
                        <li>Inconsistent: requestAnimationFrame isn't supported everywhere (iOS 6+, Android 4.4+), and it's not fully reliable on all platforms.  Just like intervals and timeouts, the literal time passed between frames isn't very reliable (especially on mobile)</li>
                      </ul></li>
                      <li>WebGL: isn't supported on the major mobile platforms.  Other than in custom browsers.
                        <ul>
                          <li>http://caniuse.com/webgl  (no, basically only reasonable on Chrome or FF)</li>
                        </ul>
                      </li>
                    </ul>
                    DOM
                    <ul>
                        <li>accessible: everyone knows HTML, especially artists.<br />
                          - Allows different team members to work more collaboratively, blurred lines between designers and developers</li>
                        <li>rapid prototyping and development</li>
                        <li>built in object model</li>
                        <li>CSS3 animations can be hardware accellerated</li>
                    </ul>

                    Verdict
                    <ul>
                        <li>Our benchmarks have been mixed.</li>
                        <li>DOM has a higher overhead of creating new elements, and can slow down when there's a high number of animated elements on screen</li>
                        <li>Canvas better for many elements, but can struggle maintaining framerate when drawing a large area every frame</li>
                        <li>Ultimately we've found we can get the best performance for the games we've made using DOM and CSS3</li>
                    </ul>
                </aside>
            </section>
            <section data-background="/assets/images/mm.jpg">
                <h2>CSS3 Animations</h2>

                <div class="css-example">
<div class="container">
  <!-- <div class="superAnim"></div> -->
  <!-- <div class="superAnim superAnim2"></div> -->
  <div class="walking"><div></div></div>
  <div class="walking walking2"><div></div></div>
</div>
<pre><code class="css">.walking {
  -webkit-backface-visibility: hidden;
  -webkit-animation-name: 'walkingMove';
  -webkit-animation-duration: 4800ms;
  -webkit-animation-timing-function: linear;
  -webkit-animation-iteration-count: infinite;
}

@-webkit-keyframes 'walkingMove' {
  0% { -webkit-transform: translate3d(660px,0px,0px) scale3d(1,1,1)}
  45% { -webkit-transform: translate3d(170px,0px,0px) scale3d(1,1,1)}
  52% { -webkit-transform: translate3d(170px,100px,0px) scale3d(-1,1,1)}
  96% { -webkit-transform: translate3d(660px,100px,0px) scale3d(-1,1,1)}
  100% { -webkit-transform: translate3d(660px,0px,0px) scale3d(1,1,1)}
}
</code></pre>
</div>

                <aside class="notes">

                    <ul>
                      <li>high level animation (tweening instructions, not painting)</li>
                      <li>hardware acceleration for CSS3 (most iOS, Android 3.0+)</li>
                      <li>smooth, fast (not blocked)</li>
                      <li>rendering not tied to intervals/timeouts (which are inconsistent)</li>
                      <li>Characters from Mighty Monsters (top down map)<br/>
                        - Sprite animations (walk) created using step-start transition timing</li>
                      <li><strong>NOTE</strong> Hardware acceleration can be turned off, and performance generally degraded, as battery levels drop</li>
                    </ul>
                </aside>
            </section>
            <section id="golem" data-background="black">
                <iframe id="golemFrame" width="682" height="700" src="craft_v3/index.html" scrolling="no"></iframe>
                <aside class="notes">

                    This was put together by our artists using a program called Sencha Animator.  It gives them a flash-like interface for creating CSS keyframe animations.
                    <br /><br />
                    Unlike other frameworks it's not reliant on fat javascript frameworks.<br />
                    Exports clean CSS.
                </aside>
            </section>
            <section>
              <h2>Another DOM Example</h2>

<pre><code class="javascript">(function animloop() {
  requestAnimFrame(animloop);
  game.update();
})();

Game.prototype.update = function() {
  var currentTime = (new Date).getTime();
  var delta = (currentTime - this.lastUpdate) / 1000;
  this.lastUpdate = currentTime;
  this.updater(delta);
};</code></pre>

                <aside class="notes">
                  <p>Further DOM example: Super Flappy Doge</p>
                  <p>Put together by coop student Justin Vanderheide in about 1 week</p>
                  <p>Might recognise, simple flappy bird clone</p>
                  <p>Animation done by updating translate3d CSS property on elements</p>
                </aside>
            </section>
            <section>
              <h2>Another DOM Example</h2>

<pre><code class="javascript">Mover.prototype.update = function(delta) {
  this.position.x += this.velocity.x * delta;
  this.position.y += this.velocity.y * delta;
  this.velocity.x += this.acceleration.x * delta;
  this.velocity.y += this.acceleration.y * delta;

  var transform = "translate3d(" +
                  this.position.x * WIDTH_100 + "px," +
                  this.position.y * HEIGHT_100 + "px, 0) " +
                  "rotate(" + Math.atan2(this.velocity.y, ROTATION_LIMITER) + "rad)";
  this.element.style.webkitTransform = transform;
};</code></pre>

                <aside class="notes">
                </aside>
            </section>
            <section>
              <h2>High Performance UI</h2>
              <div style="text-align: left;">
                <h3>3 Options:</h3>
                <ul>
                  <li>Store all UI (HTML, CSS, JavaScript) locally</li>
                  <li>Use client side templating and data binding</li>
                  <li>Cache all content and only refresh what's needed</li>
                </ul>
              </div>

              <aside class="notes">
                <ul>
                <li>To compete with native games, need a UI that feels responsive</li>
                <li>We've used all 3</li>
                <li>Local: If doing an offline only game, bundle UI in app (or use application cache - WordSwap)</li>
                <li>Data Binding: We've largely moved towards using AngularJS for new games</li>
                <li>Cache Content: Approach taken on existing games</li>
                <li>link prefetching generally not yet supported on mobile</li>
                </ul>
              </aside>
            </section>
            <section>
              <h2>Caching Content</h2>

<pre><code class="javascript">
function LoadBody(url, targetId) {
  var $currentArea = $(".content_area:visible");
  var $target = $("#"+targetId);

  if (target_id == $current_area.attr("id") || $target.is(":empty")) {
    $.get(url, function( data, status, xhr ) {
      LoadSuccess($target, data);
    });
  } else { LoadSuccess($target, ""); }
}

function LoadSuccess($target, data){
  if (data) { $target.html(data); }
  $(".content_area").hide();
  $target.show();

  //request to reload any potentially changed content
}
</code></pre>
              <aside class="notes">
                <ul>
                  <li>Very basic approach</li>
                  <li>Can extend with watch attributes that trigger a full refresh</li>
                  <li>And with preloading pages, updating in the background (trade off data usage for performance)</li>
                </ul>
              </aside>
            </section>
            <section>
                <h2>Image Preloading</h2>
                <div style="text-align: left;">
                    <h3>Problems:</h3>
                    <ul>
                        <li>
                            <img src="assets/preloading/progscan.gif" style="float: right; margin: 0;" />
                            Browsers load images with progressive image rendering
                        </li>
                        <div class="list-frag">
                            <li>Mobile Caching isn't very good</li>
                        </div>
                        <div class="list-frag">
                            <li>Sometimes browsers refuse to load images</li>
                        </div>
                    </ul>
                </div>
                <aside class="notes">


                    <ul>
                      <li>remote or large assets can be slow to render</li>
                      <li>get image (or other asset) pop in</li>
                      <li>Mostly images, but page rendering (or other assets: fonts) can also be a factor with multi-part page rendering</li>
                    </ul>
                    <ul>
                        <li>iOS won’t render offscreen or "display: none;" images</li>
                        <li>&lt;img&gt; tags will not be loaded, even if they’re visible, if the device is low on memory</li>
                        <li>large images loaded in 1024x1024 chunks on iOS<br />
                          - mighty map sprite example</li>
                    </ul>


                    http://www.codinghorror.com/blog/2005/12/progressive-image-rendering.html  - Jeff Atwood
                    http://grinninggecko.com/developing-cross-platform-html5-offline-app-1/  (appcache limits)
                </aside>
            </section>
            <section>
                <h2>Image Preloading</h2>
                <div style="text-align: left;">
                    <h3>Solutions:</h3>
                    <ul>
                        <li>Write your own cache in the native client</li>
                        <li>Use <em class="css-attr">background-image</em> not <em class="html">&lt;img&gt;</em></li>
                        <li>Preload in a “visible” container, that has a low z-index</li>
                    </ul>
                    <pre><code class="css">
  #preload {
      position: absolute;
      left: 0px;
      top: 0px;
      height: 1px;
      width: 1px;
      z-index: 0;
  }

</code></pre>

                    <div class="note">
                        Warning: background-image bypasses built in memmory limits on UIWebview.
                    </div>
                </div>
                <aside class="notes">

                    <ul>
                        <li>gets around browser issues for image preloading</li>
                        <li>A custom native client can cache images, and you can ship important images with your build</li>
                        <li>Don't show the page until window.onload is fired.   Or use the iOS webViewDidFinishLoad() method.  Every browser is a bit different.</li>
                    </ul>


                    http://www.codinghorror.com/blog/2005/12/progressive-image-rendering.html  - Jeff Atwood
                    http://grinninggecko.com/developing-cross-platform-html5-offline-app-1/  (prefetch limits)
                </aside>
            </section>
            <section>
                <h2>Browsers Everywhere</h2>
                <ul>
                  <li><span style="color:green;">Pro:</span> <strong>Every modern device</strong> has a browser</li>
                  <li><span style="color:green;">Pro:</span> Almost all mobile browsers use WebKit</li>
                  <li><span style="color:red;">Con:</span> Not all WebKits are created equal</li>
                  <em style="margin-left: 20px; display: inline-block; font-size: 80%;">translate3d on iOS = hardware acceleration<br/>translate3d on Android 2.x = broken keyboard</em>
                </ul>

                <aside class="notes">

                    <h4>LESSON: Great reach for games, but hitting different platforms is more difficult then it should be</h4>
                    <p>Great thing, everything has a browser, generally WebKit (not always equal)</p>
                    <p>More recent Android issue: during CSS animations on *some* modern Android browsers (4.2+), elements would tile - fail to repaint previous element locations (like old windows errors)</p>
                    <p>Other odd bugs: BB10 - Most compliant HMTL5 browser when launched, drop downs didn't work!</p>
                    <p>Also: not only different performance, but degrade performance differently</p>
                </aside>
            </section>
            <section>
                <h2>Platform Fragmentation</h2>
                <table>
                  <tr>
                    <td style="text-align:center;width:50%;"><img src="/assets/images/ios_chart.png" style="border:1px solid black;"></td>
                    <td><img src="/assets/images/android_chart.png" style="border:1px solid black;background-color: white;"></td>
                </table>
                <div class="foot-note"><span style="vertical-align: top;">Sources:</span>
                  <span style="display:inline-block;certical-align:top;text-align:left;">
                    <a href="https://developer.apple.com/support/appstore/">Apple - iOS Developer Support Center</a><br/>
                    <a href="http://developer.android.com/about/dashboards/index.html">Google - Developer Dashboard</a><br/>
                  </span>
                </div>
                <aside class="notes">

                    <p>Charts form Apple and Google, so take with a grain of salt</p>
                    <p>Can't limit yourself to only the latest and greatest (eg, Android)</p>
                    <p>Represents only 2 main platforms</p>
                    <p>Android <strong>finally</strong> has websocket and requestAnimationFrame support</p>
                    <p>The horror of BlackBerry</p>
                    <p>Even so, still many different targets with very different browser experiences <b>(next slide)</b></p>
                </aside>
            </section>
            <section>
                <h2>Platform Fragmentation</h2>
                <table style="margin-left:13%;">
                  <tr>
                    <td width="50%">
                      <h3>iOS</h3>
                      <ul>
                        <li>3 form factors</li>
                        <li>5 resolutions</li>
                      </ul>
                    </td>
                    <td width="50%">
                      <h3>Android</h3>
                      <ul>
                        <li><b>Many</b> form factors</li>
                        <li><b>Many</b> resolutions</li>
                        <li>Phone specific tweaks</li>
                      </ul>
                    </td>
                  </tr>
                </table>
                <aside class="notes">

                    <p>Take a closer look at main two platforms, still have...</p>
                    <p>Not exclusive to HTML5, but HTML5 isn't a magic bullet either</p>
                    <p>Game/App Interfaces need to be tighter then documents</p>
                    <p>Some HTML5 specific things
                      <ul>
                        <li>Need *some* responsive design, OR scrolling (scalling often not handled well - TowerUp)</li>
                        <li>CSS Authoring framework is <em>very</em> userfull (Compass)</li>
                      </ul>
                    </p>
                </aside>
            </section>
            <!--
            <section>
                <h2>Cheating</h2>
                <p>Editing a browser page is easy</p>
                <p>Automating a browser page is easy</p>
                <p>All communication and front end code is compromised</p>

                <aside class="notes">

                    <p style="margin-bottom: 0in">Suite of tools for editing in the browser</p>
                    <p style="margin-bottom: 0in">Your game can be automated using out of the box testing software</p>
                    <p style="margin-bottom: 0in">Harder on mobile, bigger target on the web</p>
                    <p style="margin-bottom: 0in">Can severly damage a competitive multiplayer community</p>
                </aside>
            </section>
            <section>
                <h2>Web Automation</h2>
                <pre><code class="ruby">def check_request(user, controller, action)
  ask_for_confirmation = false
  req_check = AutoClicker.find_or_create_by_user_id_and_target(user.id,
  "#{controller}:#{action}")

  if(req_check.updated_at > MAX_TIME_BETWEEN_REQUESTS.seconds.ago)
    req_check.increment(:request_count)
  else
    req_check.request_count = 1
  end

  if(req_check.request_count > MAX_FREQUEST_REQUESTS)
    ask_for_confirmation = true
  end

  return ask_for_confirmation
end</code></pre>

                <aside class="notes">

                    <p>Example of Auto Click Detection</p>
                    <p>Approach: too many <em>regular</em> actions for a human, pop up modal dialog asking confirmation</p>
                    <p>Problems:
                      <ul>
                        <li>too many false positives</li>
                        <li>too disruptive to normal players</li>
                        <li>too easy to get around</li>
                        <li>tried captcha approach, more disruptive</li>
                      </ul>
                    </p>
                </aside>
            </section>
            <section>
                <h2>Data Analysis</h2>
                <img src="/assets/images/cheater.png"/>

                <aside class="notes">

                    <p>Example of Data Analysis</p>
                    <p>Approach: find patterns in request</p>
                    <p>best, but hard to automate (one type of traditional cheat detection)</p>
                </aside>
            </section>
            <section>
                <h2>Race Conditions</h2>
                <pre><code class="ruby">
def acquire_lock(key, value, options = {})
  error = options[:error_msg] || nil

  stored_key = Rails.cache.write(key, value, :expires_in => expiry,
                                   :unless_exist => true)
  flash[:error] = error if !stored_key && error.present?

  return stored_key
end
                </code></pre>

                <aside class="notes">

                    <p>Example of Acquire Lock</p>
                    <p>Problem: race conditions issue with multiple server threads processing simultaneously</p>
                    <p>Can code around, but can be tough if not planned from the start (legacy games)</p>
                    <p>Approach: Basic semaphor, using <em>fast</em> cache</p>
                </aside>
            </section>
            <section>
                <h2>Updates are Fast</h2>
                <div>
                  Average iOS review period: 1 week
                  <br>
                </div>
                <svg width="670" height="500" style="overflow: hidden;"><defs id="defs"><clipPath id="_ABSTRACT_RENDERER_ID_0"><rect x="40" y="20" width="630" height="400"></rect></clipPath></defs><g><rect x="40" y="20" width="630" height="400" stroke="none" stroke-width="0" fill-opacity="0" fill="#ffffff"></rect><g clip-path="url(#_ABSTRACT_RENDERER_ID_0)"><g><rect x="68" y="20" width="1" height="400" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="225" y="20" width="1" height="400" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="384" y="20" width="1" height="400" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="543" y="20" width="1" height="400" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="40" y="419" width="630" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="40" y="319" width="630" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="40" y="220" width="630" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="40" y="120" width="630" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect><rect x="40" y="20" width="630" height="1" stroke="none" stroke-width="0" fill="#cccccc"></rect></g><g><rect x="40" y="20" width="1" height="400" stroke="none" stroke-width="0" fill="#333333"></rect><rect x="40" y="419" width="630" height="1" stroke="none" stroke-width="0" fill="#333333"></rect></g><g><path d="M669.5,60.89875000000001L667.771978021978,56.40999999999997L666.043956043956,57.90625L664.315934065934,56.40999999999997L662.5879120879121,58.90375L660.8598901098901,58.90375L659.1318681318681,64.88874999999996L657.4038461538462,70.87374999999997L655.6758241758241,79.85125L653.9478021978022,96.31L652.2197802197802,111.77125000000001L650.4917582417582,118.75374999999997L648.7637362637363,121.2475L647.0357142857142,125.23749999999995L645.3076923076923,124.73874999999998L643.5796703296703,124.73874999999998L641.8516483516484,126.73374999999999L640.1236263736264,131.22249999999997L638.3956043956043,126.23500000000001L636.6675824175824,122.74374999999998L634.9395604395604,115.26250000000005L633.2115384615385,114.26499999999999L631.4835164835165,112.76874999999995L629.7554945054945,109.27750000000003L628.0274725274725,107.78125L626.2994505494505,106.28499999999997L624.5714285714286,107.28250000000003L622.8434065934066,109.27750000000003L621.1153846153846,106.28499999999997L619.3873626373626,109.27750000000003L617.6593406593406,114.26499999999999L615.9313186813187,111.77125000000001L614.2032967032967,122.245L612.4752747252747,126.23500000000001L610.7472527472527,135.21249999999998L609.0192307692307,144.19L607.2912087912088,160.14999999999998L605.5631868131868,167.63125000000002L603.8351648351648,171.12249999999997L602.1071428571429,173.61625L600.3791208791208,174.61374999999998L598.6510989010989,175.11249999999998L596.9230769230769,181.59625000000003L595.195054945055,184.09L593.467032967033,187.58124999999998L591.7390109890109,192.56875000000002L590.010989010989,191.57125L588.282967032967,192.07000000000002L586.554945054945,191.57125L584.8269230769231,190.57375000000002L583.0989010989011,184.09L581.3708791208791,186.085L579.6428571428571,184.09L577.9148351648352,182.095L576.1868131868132,182.095L574.4587912087912,182.59375L572.7307692307692,182.095L571.0027472527472,190.07500000000002L569.2747252747253,193.56625L567.5467032967033,198.55375L565.8186813186813,202.045L564.0906593406593,205.03750000000002L562.3626373626373,205.03750000000002L560.6346153846154,208.03L558.9065934065934,210.52374999999998L557.1785714285714,206.035L555.4505494505495,211.52125L553.7225274725274,222.9925L551.9945054945055,223.49124999999998L550.2664835164835,236.95749999999998L548.5384615384615,228.97750000000002L546.8104395604396,206.035L545.0824175824175,203.04250000000002L543.3543956043956,194.56375L541.6263736263736,189.0775L539.8983516483516,185.08749999999998L538.1703296703297,189.0775L536.4423076923076,194.56375L534.7142857142858,199.55124999999998L532.9862637362637,199.0525L531.2582417582418,200.54875L529.5302197802198,196.05999999999997L527.8021978021977,193.0675L526.0741758241759,190.07500000000002L524.3461538461538,192.07000000000002L522.6181318681319,191.0725L520.8901098901099,189.0775L519.1620879120878,186.58375L517.434065934066,182.59375L515.7060439560439,182.095L513.978021978022,180.59875L512.25,175.61125L510.521978021978,170.125L508.79395604395603,177.1075L507.0659340659341,178.60375L505.33791208791206,184.09L503.6098901098901,187.58124999999998L501.8818681318681,187.58124999999998L500.15384615384613,191.0725L498.4258241758242,197.55624999999998L496.69780219780216,197.0575L494.9697802197802,197.0575L493.24175824175825,197.55624999999998L491.51373626373623,197.0575L489.7857142857143,196.05999999999997L488.0576923076923,197.55624999999998L486.3296703296703,192.07000000000002L484.60164835164835,180.59875L482.87362637362634,172.61874999999998L481.1456043956044,162.64374999999995L479.4175824175824,157.65625L477.6895604395604,154.66375L475.96153846153845,148.67875000000004L474.2335164835165,137.70624999999995L472.5054945054945,132.22000000000003L470.7774725274725,121.2475L469.0494505494505,113.76625000000001L467.32142857142856,111.77125000000001L465.5934065934066,106.28499999999997L463.8653846153846,100.29999999999995L462.1373626373626,98.305L460.40934065934067,96.80875000000003L458.68131868131866,95.81124999999997L456.9532967032967,88.82875000000001L455.2252747252747,90.32500000000005L453.49725274725273,90.82375000000002L451.7692307692308,92.81875000000002L450.04120879120876,93.81624999999997L448.3131868131868,103.79124999999999L446.58516483516485,110.27499999999998L444.85714285714283,109.27750000000003L443.1291208791209,111.27250000000004L441.40109890109886,112.26999999999998L439.6730769230769,111.77125000000001L437.94505494505495,108.77875L436.21703296703294,110.27499999999998L434.489010989011,107.78125L432.760989010989,112.26999999999998L431.032967032967,111.77125000000001L429.30494505494505,110.27499999999998L427.57692307692304,102.29499999999996L425.8489010989011,102.29499999999996L424.1208791208791,91.32249999999999L422.3928571428571,84.83875L420.66483516483515,81.84625L418.9368131868132,78.35500000000002L417.2087912087912,76.36000000000001L415.4807692307692,74.36500000000001L413.7527472527472,71.87125000000003L412.02472527472526,75.36249999999995L410.2967032967033,84.34000000000003L408.5686813186813,85.83625L406.84065934065933,85.83625L405.1126373626374,90.82375000000002L403.38461538461536,105.78625L401.6565934065934,114.26499999999999L399.92857142857144,123.74125000000004L398.20054945054943,146.185L396.4725274725275,158.65375L394.74450549450546,162.64374999999995L393.0164835164835,169.12750000000003L391.28846153846155,181.59625000000003L389.56043956043953,188.08L387.8324175824176,194.06500000000003L386.1043956043956,203.54125L384.3763736263736,200.04999999999998L382.64835164835165,196.55875L380.92032967032964,190.07500000000002L379.1923076923077,179.60125000000002L377.4642857142857,166.63375L375.7362637362637,153.66625L374.00824175824175,137.70624999999995L372.2802197802198,125.23749999999995L370.5521978021978,119.75125000000003L368.8241758241758,109.27750000000003L367.0961538461538,95.3125L365.36813186813185,88.82875000000001L363.6401098901099,69.3775L361.9120879120879,42.94375000000002L360.1840659340659,30.475000000000023L358.45604395604397,28.480000000000018L356.72802197802196,24.49000000000001L355,26.485000000000014L353.271978021978,33.96625L351.54395604395603,70.87374999999997L349.8159340659341,88.33000000000004L348.08791208791206,115.26250000000005L346.3598901098901,131.72125L344.63186813186815,158.65375L342.90384615384613,181.0975L341.1758241758242,201.0475L339.44780219780216,205.53625L337.7197802197802,207.0325L335.99175824175825,209.52625L334.26373626373623,210.02499999999998L332.5357142857143,216.01L330.8076923076923,221.49625L329.0796703296703,230.9725L327.35164835164835,236.45875L325.62362637362634,239.95L323.8956043956044,238.9525L322.1675824175824,238.9525L320.4395604395604,238.9525L318.71153846153845,238.45375L316.9835164835165,235.46125L315.2554945054945,238.45375L313.5274725274725,238.9525L311.79945054945057,239.45125000000002L310.07142857142856,242.44375000000002L308.3434065934066,244.43875L306.6153846153846,249.42624999999998L304.8873626373626,246.43375L303.15934065934067,254.41375L301.43131868131866,262.8925L299.7032967032967,266.38375L297.97527472527474,267.88L296.24725274725273,269.875L294.5192307692308,270.37375L292.79120879120876,266.38375L291.0631868131868,260.8975L289.33516483516485,254.41375L287.6071428571429,248.9275L285.8791208791209,242.44375000000002L284.15109890109886,235.46125L282.4230769230769,218.005L280.69505494505495,200.04999999999998L278.967032967033,175.11249999999998L277.239010989011,146.185L275.51098901098896,126.73374999999999L273.782967032967,116.25999999999999L272.05494505494505,105.78625L270.3269230769231,93.81624999999997L268.5989010989011,79.85125L266.8708791208791,77.35749999999996L265.1428571428571,66.88374999999996L263.41483516483515,64.88874999999996L261.6868131868132,57.90625L259.95879120879124,56.90875L258.2307692307692,50.424999999999955L256.5027472527472,44.44L254.77472527472526,50.92375000000004L253.0467032967033,63.891250000000014L251.3186813186813,69.87625000000003L249.59065934065933,76.85874999999999L247.86263736263734,79.35249999999996L246.1346153846154,81.34749999999997L244.4065934065934,84.83875L242.67857142857142,92.32L240.95054945054943,98.80375000000004L239.22252747252747,100.79875000000004L237.4945054945055,105.28750000000002L235.7664835164835,109.27750000000003L234.03846153846152,114.76374999999996L232.31043956043956,117.75625000000002L230.58241758241758,117.75625000000002L228.8543956043956,116.75874999999996L227.1263736263736,118.255L225.39835164835165,119.75125000000003L223.67032967032966,120.74874999999997L221.94230769230768,119.2525L220.21428571428572,120.74874999999997L218.48626373626374,121.2475L216.75824175824175,121.74625000000003L215.03021978021977,125.23749999999995L213.3021978021978,125.23749999999995L211.57417582417582,119.75125000000003L209.84615384615384,116.75874999999996L208.11813186813185,120.74874999999997L206.3901098901099,122.74374999999998L204.6620879120879,127.73125000000005L202.93406593406593,125.73625000000004L201.20604395604394,125.73625000000004L199.47802197802199,133.21749999999997L197.75,141.69624999999996L196.02197802197801,141.1975L194.29395604395603,145.68624999999997L192.56593406593407,149.1775L190.8379120879121,153.66625L189.1098901098901,157.15750000000003L187.38186813186812,162.64374999999995L185.65384615384616,176.11L183.92582417582418,183.0925L182.1978021978022,189.0775L180.4697802197802,194.06500000000003L178.74175824175825,202.045L177.01373626373626,204.04L175.28571428571428,206.53375000000003L173.5576923076923,215.51125000000002L171.82967032967034,220.49875L170.10164835164835,228.97750000000002L168.37362637362637,229.47625L166.64560439560438,227.98000000000002L164.91758241758242,225.985L163.18956043956044,221.995L161.46153846153845,220.9975L159.7335164835165,219.50125L158.00549450549448,213.51625L156.27747252747253,210.52374999999998L154.54945054945054,204.04L152.82142857142856,201.0475L151.0934065934066,195.0625L149.3653846153846,187.58124999999998L147.63736263736263,183.0925L145.90934065934067,177.60625000000002L144.18131868131866,170.125L142.4532967032967,166.63375L140.72527472527472,164.63875L138.99725274725273,161.14750000000004L137.26923076923077,147.68124999999998L135.5412087912088,141.1975L133.8131868131868,136.70875L132.08516483516485,132.71875L130.35714285714286,127.73125000000005L128.62912087912088,126.23500000000001L126.9010989010989,121.2475L125.17307692307692,116.75874999999996L123.44505494505495,111.27250000000004L121.71703296703296,109.77625L119.98901098901099,108.27999999999997L118.26098901098901,106.78375L116.53296703296704,108.77875L114.80494505494505,109.77625L113.07692307692308,113.26750000000004L111.3489010989011,118.75374999999997L109.62087912087912,114.76374999999996L107.89285714285714,114.76374999999996L106.16483516483517,114.76374999999996L104.43681318681318,117.2575L102.70879120879121,116.25999999999999L100.98076923076923,117.75625000000002L99.25274725274724,118.255L97.52472527472527,117.75625000000002L95.7967032967033,118.75374999999997L94.06868131868131,118.75374999999997L92.34065934065933,115.26250000000005L90.61263736263736,115.26250000000005L88.88461538461539,113.26750000000004L87.1565934065934,108.27999999999997L85.42857142857143,111.27250000000004L83.70054945054946,111.77125000000001L81.97252747252747,111.27250000000004L80.24450549450549,109.77625L78.51648351648352,111.27250000000004L76.78846153846155,109.27750000000003L75.06043956043956,108.77875L73.33241758241758,109.27750000000003L71.6043956043956,108.27999999999997L69.87637362637362,106.28499999999997L68.14835164835165,108.27999999999997L66.42032967032966,106.78375L64.6923076923077,102.79375000000005L62.964285714285715,107.28250000000003L61.23626373626374,111.27250000000004L59.50824175824176,112.26999999999998L57.78021978021978,113.76625000000001L56.0521978021978,113.26750000000004L54.324175824175825,116.25999999999999L52.59615384615385,117.75625000000002L50.86813186813187,118.255L49.14010989010989,124.24000000000001L47.41208791208791,130.22500000000002L45.684065934065934,136.21000000000004L43.956043956043956,137.70624999999995L42.22802197802198,143.1925L40.5,152.16999999999996" stroke="#223344" stroke-width="2" fill-opacity="1" fill="none"></path></g></g><g></g><g><g><text text-anchor="middle" x="68.43635531135531" y="439.05" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">Apr 2013</text></g><g><text text-anchor="middle" x="225.6863553113553" y="439.05" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">Jul 2013</text></g><g><text text-anchor="middle" x="384.6643772893773" y="439.05" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">Oct 2013</text></g><g><text text-anchor="middle" x="543.7144001831502" y="439.05" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">Jan 2014</text></g><g><text text-anchor="end" x="29" y="424.05" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">0.0</text></g><g><text text-anchor="end" x="29" y="324.3" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">2.0</text></g><g><text text-anchor="end" x="29" y="224.55" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">4.0</text></g><g><text text-anchor="end" x="29" y="124.8" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">6.0</text></g><g><text text-anchor="end" x="29" y="25.05" font-family="Arial" font-size="13" stroke="none" stroke-width="0" fill="#444444">8.0</text></g></g></g><g></g></svg>
                <div class="foot-note">Source: <a href="http://reviewtimes.shinydevelopment.com/">http://reviewtimes.shinydevelopment.com</a></div>
                <aside class="notes">


                    Rapid development and Deployment
                    <ul>
                      <li>Long review times<ul>
                        <li>Average iOS review period: 1 week</li>
                        <li>Average Google Play release period: a few hours</li>
                        <li>Average BlackBerry review time: a couple days</li>
                        <li>Average Amazon review period: weeks (2 weeks for our last update)</li>
                        <li>Time to deploy HTML updates: <b>minutes</b></li>
                      </ul></li>
                      <li>Apple is getting better, 3 days</li>
                      <li>Need an update for certain things like screenshot or icon changes anyways</li>
                      <li>Users think all changes = app updates
                        <ul><li>patch notes get weird</li></ul>
                      </li>
                    </ul>
                </aside>
            </section>
            -->
            <!--
            <section>
              <h2>Room to grow</h2>
              <p>Still need a native client for:</p>
              <ul>
                <li>Sound</li>
                <li>Payments</li>
                <li>Sockets</li>
                <li>Sensors / Accelerometer</li>
                <li>Push Notifications</li>
                <li>Distribution</li>
              </ul>
              <aside class="notes">
                <ul>
                  <li>Sound is getting better, but until everyone has web audio api (iOS 6+, no Android), it's a terrible hack. (Audio Sprite-sheeting)</li>
                  <li>Payments: There's PayPal, but it's getting forced out</li>
                  <li>Sockets: Android <b>still</b> doesn't have WebSocket support!</li>
                  <li>Sensors: Some platforms provide <em>some</em> access, but inconsistent, limited and often requires in browser permissions</li>
                  <li>End note: None of your customers care that it’s HTML5
                    <ul>
                        <li>Games are judged at face value</li>
                        <li>make sure the game is fast and responsive</li></ul>
                  </li>
                </ul>
              </aside>
            </section>
            -->
            <section>
                <h2>Thank you</h2>
                <div>Questions?</div>
                <div>
                    <br>
                </div>
                <div class="contacts">
                  <div class="left">
                    Owen Lawson<br />
                    <a href="mailto:owen@uken.com?Subject=PAX%20Talk" class="roll">owen@uken.com</a><br />
                    @OwenCPL
                  </div>
                  <div class="right">
                    Special Thanks:<br />
                    Adam Proctor<br />
                    Simon Brooks<br />
                    Justin Vanderheide
                  </div>
                </div>
                <div class="footnote">Reveal.js (https://github.com/hakimel/reveal.js)</div>
            </section>
      </div>



    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>


    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'concave', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });


    </script>



  </body>
</html>
